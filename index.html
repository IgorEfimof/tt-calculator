<!DOCTYPE html>
<html>
<head>
    <title>TT Value Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input { width: 100%; padding: 8px; box-sizing: border-box; }
        button { background: #4CAF50; color: white; border: none; padding: 10px 15px; cursor: pointer; }
        .result { margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 5px; }
        .value-positive { color: green; font-weight: bold; }
        .value-negative { color: red; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Калькулятор Value-ставок (TT)</h1>
        
        <div class="input-group">
            <label>Коэффициент П1:</label>
            <input type="number" step="0.01" id="odds1" placeholder="1.90">
        </div>
        
        <div class="input-group">
            <label>Коэффициент П2:</label>
            <input type="number" step="0.01" id="odds2" placeholder="1.90">
        </div>
        
        <h3>Тоталы</h3>
        <div class="input-group">
            <label>Over 17.5:</label>
            <input type="number" step="0.01" id="over17" placeholder="1.85">
        </div>
        <div class="input-group">
            <label>Under 17.5:</label>
            <input type="number" step="0.01" id="under17" placeholder="1.95">
        </div>
        
        <button onclick="calculate()">Рассчитать Value</button>
        
        <div class="result" id="result">
            <h3>Результаты анализа:</h3>
            <div id="output"></div>
            <table id="resultsTable">
                <tr>
                    <th>Рынок</th>
                    <th>Коэф.</th>
                    <th>Вероятность</th>
                    <th>Value</th>
                </tr>
            </table>
        </div>
    </div>

    <script>
        function calculate() {
            // Получаем значения
            const odds1 = parseFloat(document.getElementById('odds1').value) || 0;
            const odds2 = parseFloat(document.getElementById('odds2').value) || 0;
            const over17 = parseFloat(document.getElementById('over17').value) || 0;
            const under17 = parseFloat(document.getElementById('under17').value) || 0;
            
            // Рассчитываем маржу
            const margin = (1/odds1 + 1/odds2 - 1) * 100;
            
            // Рассчитываем вероятности без маржи
            const prob1 = (1/odds1) / (1 + margin/100) * 100;
            const prob2 = (1/odds2) / (1 + margin/100) * 100;
            
            // Анализируем тоталы
            let total17OverValue = 0;
            let total17UnderValue = 0;
            
            if (over17 > 0 && under17 > 0) {
                const totalMargin = (1/over17 + 1/under17 - 1) * 100;
                const fairOverProb = (1/over17) / (1 + totalMargin/100) * 100;
                const fairUnderProb = (1/under17) / (1 + totalMargin/100) * 100;
                
                // Предположим, что реальная вероятность Over 17.5 - 52%
                const realOverProb = 52;
                total17OverValue = realOverProb - fairOverProb;
                
                // Предположим, что реальная вероятность Under 17.5 - 48%
                const realUnderProb = 48;
                total17UnderValue = realUnderProb - fairUnderProb;
            }
            
            // Выводим результаты
            let output = `<p>Маржа букмекера: <b>${margin.toFixed(2)}%</b></p>`;
            output += `<p>Реальные вероятности (без маржи):</p>`;
            output += `<ul>
                <li>П1: ${prob1.toFixed(2)}%</li>
                <li>П2: ${prob2.toFixed(2)}%</li>
            </ul>`;
            
            document.getElementById('output').innerHTML = output;
            
            // Обновляем таблицу
            const table = document.getElementById('resultsTable');
            // Очищаем старые данные (кроме заголовков)
            while (table.rows.length > 1) {
                table.deleteRow(1);
            }
            
            // Добавляем строки с результатами
            addRow(table, "П1", odds1, prob1, 0);
            addRow(table, "П2", odds2, prob2, 0);
            
            if (over17 > 0) {
                addRow(table, "Over 17.5", over17, (1/over17)*100, total17OverValue);
            }
            
            if (under17 > 0) {
                addRow(table, "Under 17.5", under17, (1/under17)*100, total17UnderValue);
            }
        }
        
        function addRow(table, market, odds, probability, value) {
            const row = table.insertRow();
            row.insertCell(0).textContent = market;
            row.insertCell(1).textContent = odds.toFixed(2);
            row.insertCell(2).textContent = probability.toFixed(2) + '%';
            
            const valueCell = row.insertCell(3);
            valueCell.textContent = value.toFixed(2) + '%';
            
            if (value > 0) {
                valueCell.className = 'value-positive';
            } else if (value < 0) {
                valueCell.className = 'value-negative';
            }
        }
    </script>
</body>
</html>
